## 运维自动化发展 ##
### 1. 运维标准化 ###
#### 物理设备层面: ####

    1. 服务器标签化、设备负责人、设备采购详情、设备摆放标准。
    2. 网络划分、远程控制卡、网卡端口
    3. 服务器机型、硬盘、内存统一。根据业务分类
    4. 资产命名规范、编号规范、类型规范

#### 操作系统层面： ####
    1. 操作系统版本
    2. 系统初始化（DNS、NTP、内核参数调优、rsyslog、主机名规范）
    3. 基础Agent配备（Zabbix Agent、Logstash Agent、Saltstack minion）
    4. 系统监控标准（CPU、内存、硬盘、网络、进程）

#### 应用服务层面： ####
    1. Web服务器选型（Apache、Nginx）
    2. 进程启动用户、端口监听规范、日志收集规范（访问日志、错误日志、运行日志）
    3. 配置管理（配置文件规范、脚本规范）
    4. 架构规范（Nginx+Keepalived、LVS+Keepalived等等）
    5. 部署规范（位置、包命名等）

#### 运维操作层面 ####
    1. 机房巡检流程（周期、内容、报修流程）
    2. 业务部署流程（先测试、后生产。回滚）
    3. 故障处理流程（紧急处理、故障升级、重大故障管理）
    4. 工作日志标准（如何编写工作日志）
    5. 业务上线流程（1.项目发起 2.系统安装  3.部署Nginx 4.解析域名 5.测试 6.加监控 7.备份）
    6. 业务下线流程（谁发起，数据如何处理。）
    7. 运维安全规范（密码复杂度、更改周期、VPN使用规范、服务登录规范）


--------------------------------------------
# 标准化（规范化  流程化  文档化）  目标：文档化 #

--------------------------------------------

### 2. 工具化 ###
    1. SHELL脚本（功能性（流程）脚本、检查型、报表型）
    2. 开源工具：zabbix ELKStack SaltStack Cobbler

目标：

    1. 促进标准化的实施
    2. 将重复的操作，简单化
    3. 将多次操作，流程化
    4. 减少人为操作的低效和降低故障率

痛点：

    1. 你至少要ssh到服务器执行。可能犯错
    2. 多个脚本有执行顺序的时候，可能犯错
    3. 权限不好管理，日志没法统计
    4. 无法避免手工操作。

### 3. Web化 ###
运维操作平台

    1. 做成Web界面
    2. 权限控制
    3. 日志记录
    4. 弱化流程
    5. 不用ssh到服务器，减少人为操作造成的故障


例子：Job管理平台

* DNS Web管理      bind-DLZ
* 负载均衡Web管理   SLB
* 监控平台          Zabbix
* 操作系统安装平台

### 4. 服务化（API化） ###
* DNS Web管理平台 bind-DLZ   dns-api
* 负载均衡Web管理             slb-api
* Job管理平台                job-api
* 监控平台Zabbix             zabbix-api
* 操作系统安装平台            cobbler-api
* 部署平台                   deploy-api
* 配置管理平台                saltstack-api
* 自动化测试平台              test-api

工作流程

    1. 调用cobbler-api安装操作系统
    2. 调用saltstack-api进行系统初始化
    3. 调用dns-api解析主机名
    4. 调用zabbix-api将该新上线机器加上监控 
    5. 再次调用saltstack-api部署软件（安装Nginx+PHP）
    6. 调用deploy-api将当前版本的代码部署到服务器上
    7. 调用test-api测试当前服务运行是否正常
    8. 调用slb-api将该节点加入集群

### 5. 智能化 ###
运维自动化发展层级

* 智能化 
* 服务化、API化
* Web化、平台化
* 标准化、工具化

智能化的自动扩容、缩容（服务降级、故障自愈）

     触发机制-->>决策系统（决策树）-->>

zabbix 触发Action

触发：

    1. 当某个集群的访问量超过最大支撑量，比如10000
    2. 并持续5分钟
    3. 不是攻击
    4. 资源池有可用资源
    5. 当前后端服务支撑量是否超过阈值，如果超过应该后端先扩容
    6. 数据库是否可以支撑当前并发
    7. 当前自动化扩展队列，是否有正在扩容的节点
    8. 其他业务相关的




